local TextChatService = game:GetService("TextChatService")

task.spawn(function()
    print("üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡∏±‡∏Å‡∏à‡∏±‡∏ö‡∏ú‡πà‡∏≤‡∏ô TextChatService (High Sensitivity)...")
    
    -- ‡πÉ‡∏ä‡πâ Event ‡∏î‡∏±‡∏Å‡∏à‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏•‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö
    TextChatService.OnIncomingMessage = function(message)
        -- ‡∏î‡∏∂‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
        local content = message.Text
        
        -- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏µ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
        if content and content ~= "" then
            -- [LOG ‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠ Debug]
            print("üì© ‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö: " .. content)

            -- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ (‡πÄ‡∏ä‡πà‡∏ô Legendary, Gift)
            local keywords = {"Mega"}
            for _, word in pairs(keywords) do
                if string.find(content:lower(), word:lower()) then
                    print("üî• [MATCH FOUND] ‡πÄ‡∏à‡∏≠‡∏Ñ‡∏≥‡∏ó‡∏µ‡πà‡∏ï‡∏≤‡∏°‡∏´‡∏≤: " .. word)
                    -- ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏™‡πà‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ
                end
            end
        end
        
        -- ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤ nil ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ä‡∏ó‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ï‡∏≤‡∏°‡∏õ‡∏Å‡∏ï‡∏¥ (‡πÑ‡∏°‡πà‡πÑ‡∏õ‡∏Ç‡∏±‡∏î‡∏Ç‡∏ß‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°)
        return nil
    end
end)
-- ###########################################################################################
local TextChatService = game:GetService("TextChatService")

task.spawn(function()
    print("üöÄ ‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡∏±‡∏Å‡∏à‡∏±‡∏ö Mega Boss ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô...")
    
    TextChatService.OnIncomingMessage = function(message)
        local content = message.Text
        
        if content and content ~= "" then
            -- 1. ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° Mega Boss Spawned ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
            if string.find(content, "Mega Boss Spawned") then
                print("üì© ‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏∞‡∏ö‡∏ö: " .. content)

                -- 2. ‡πÉ‡∏ä‡πâ Pattern Matching ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏á "at " ‡∏à‡∏ô‡∏à‡∏ö‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ
                -- %s*at%s+ ‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ "at" ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡∏•‡πâ‡∏≠‡∏°‡∏£‡∏≠‡∏ö
                -- (.*) ‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏°‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£
                local mapName = string.match(content, "at%s+(.+)")

                if mapName then
                    -- ‡∏ï‡∏±‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢ ! ‡∏≠‡∏≠‡∏Å (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏°‡∏û‡πÄ‡∏û‡∏µ‡∏¢‡∏ß‡πÜ
                    mapName = mapName:gsub("!", "")
                    
                    print("üåç [BOSS DETECTED] ‡πÅ‡∏°‡∏û‡∏ó‡∏µ‡πà‡∏ö‡∏≠‡∏™‡πÄ‡∏Å‡∏¥‡∏î‡∏Ñ‡∏∑‡∏≠: " .. mapName)
                    
                    -- ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏≠‡∏≤ mapName ‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ ‡πÄ‡∏ä‡πà‡∏ô:
                    -- if mapName == "Namek Planet" then ... end
                end
            end
        end
        return nil
    end
end)
-- ###########################################################################################
local function FindRealMegaBossByConfig()
    -- 1. ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Config ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡πÇ‡∏ã‡∏ô (‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠ DemonSlayer)
    local Success, ZoneConfig = pcall(function()
        return require(game:GetService("ReplicatedStorage").Scripts.Configs.MultipleZones.Enemies.DemonSlayer)
    end)
    
    if not Success or not ZoneConfig then
        print("‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏∂‡∏á‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå Config ‡∏Ç‡∏≠‡∏á‡πÇ‡∏ã‡∏ô‡πÑ‡∏î‡πâ")
        return
    end

    -- ‡∏´‡∏≤‡∏Ñ‡πà‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á Emperor ‡πÉ‡∏ô‡πÇ‡∏ã‡∏ô‡∏ô‡∏µ‡πâ
    local StandardEmperorHP = 0
    for _, data in pairs(ZoneConfig) do
        if data.Difficult == "Emperor" then
            StandardEmperorHP = data.MaxHealth
            break
        end
    end

    print(string.format("--- [ üîç Cross-Checking MegaBoss (Normal Emperor HP: %s) ] ---", tostring(StandardEmperorHP)))
    
    local foundCount = 0
    for _, v in pairs(getgc(true)) do
        if type(v) == "table" then
            local config = rawget(v, "Config")
            local diffConfig = rawget(v, "DifficultConfig")
            local alive = rawget(v, "Alive")

            if type(config) == "table" and alive == true and config.Difficult == "Emperor" then
                local currentMaxHP = config.MaxHealth or 0
                
                -- [‡∏à‡∏∏‡∏î‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô] ‡∏ñ‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡πÑ‡∏°‡πà‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô ‡πÅ‡∏õ‡∏•‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô MegaBoss
                if currentMaxHP ~= StandardEmperorHP then
                    foundCount = foundCount + 1
                    print(string.format("üëø [‡∏û‡∏ö MegaBoss ‡∏ï‡∏±‡∏ß‡∏à‡∏£‡∏¥‡∏á!]"))
                    print(string.format("   ‡∏ä‡∏∑‡πà‡∏≠: %s", config.Display or "Unknown"))
                    print(string.format("   ‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: %s (‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô! ‚úÖ)", tostring(currentMaxHP)))
                    print(string.format("   UID: %s", tostring(rawget(v, "Uid"))))
                    print("   -------------------------")
                else
                    print(string.format("‚ÑπÔ∏è ‡∏û‡∏ö Emperor ‡∏õ‡∏Å‡∏ï‡∏¥: %s (‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏ï‡∏£‡∏á‡∏ï‡∏≤‡∏° Config)", config.Display))
                end
            end
        end
    end

    if foundCount == 0 then
        print("‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏û‡∏ö MegaBoss ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥‡πÉ‡∏ô‡πÇ‡∏ã‡∏ô‡∏ô‡∏µ‡πâ")
    end
end

FindRealMegaBossByConfig()